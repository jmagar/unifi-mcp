services:
  unifi-mcp:
    build: .
    container_name: unifi-mcp-server
    restart: unless-stopped
    ports:
      - "8001:8001"
    environment:
      # UniFi Controller Configuration
      - UNIFI_CONTROLLER_URL=${UNIFI_CONTROLLER_URL:-https://192.168.1.1:443}
      - UNIFI_USERNAME=${UNIFI_USERNAME:-admin}
      - UNIFI_PASSWORD=${UNIFI_PASSWORD}
      - UNIFI_IS_UDM_PRO=${UNIFI_IS_UDM_PRO:-true}
      - UNIFI_VERIFY_SSL=${UNIFI_VERIFY_SSL:-false}
      
      # Server Configuration
      - UNIFI_LOCAL_MCP_HOST=${UNIFI_LOCAL_MCP_HOST:-0.0.0.0}
      - UNIFI_LOCAL_MCP_PORT=${UNIFI_LOCAL_MCP_PORT:-8001}
      - UNIFI_LOCAL_MCP_LOG_LEVEL=${UNIFI_LOCAL_MCP_LOG_LEVEL:-INFO}
    
    # Health check
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8001/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - unifi-mcp-network

networks:
  unifi-mcp-network:
    driver: bridge
